title: 某次无聊的 JavaScript 代码 优化过程
date: 2015-02-20 16:37:36
tags: [TECH, optimize code]
categories: [JavaScript]
description: 目标功能：使id为blink的html标签闪烁。得到的原始代码，多个修改版本：用jQuery写，精简代码；避免每次使用jQuery选择器去检索标签和属性；改用布尔变量，以及“ ? &#58; ”语句；压缩语句。以及 过程中犯的愚蠢错误。
---
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><div align="left"><font face="Courier New" size="2"><b>目标功能：使id为</b></font><b><span style="color: rgb(42, 0, 255); font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">blink</span><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">的html标签闪烁。</span></b></div><div align="left"><b><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;"><br/></span></b></div><div align="left"><font face="Courier New" size="2"><b><br/></b></font></div><div align="left"><font face="Courier New" size="2"><b>我得到的原始程序：</b></font></div><div align="left"><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">blinklink() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(!document.getElementById(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).style.color) {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).style.color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;red&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(document.getElementById(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).style.color ==</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;red&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">) {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).style.color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;yellow&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).style.color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;red&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; timer = setTimeout(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;blinklink()&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1000);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">stoptimer() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; clearTimeout(timer);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">blinklink();</span></font></div></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><b>第一版修改：</b></font></div><div align="left"><div align="left"><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">blinklink() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp; &nbsp; <b>//</b></span></font><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">精简代码：去掉无效代码，</b><b style="font-size: 10pt; font-family: &amp;apos;Courier New&amp;apos;;">减少闪烁的颜色，并使用jQuery写法</b></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">($(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">) ==</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;rgb(255, 0, 0)&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<b>$(</b></span></font><b><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">,</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></b></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>$(</b></span></font><b><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">,</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></b></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; timer = setTimeout(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;blinklink()&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1000);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#010101" face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">blinklink();</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><b>第二版：</b></font></div><div align="left"><div><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">//</b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">精简代码：</b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">jQuery写法精简代码。</b></div></div><div align="left"><div align="left"><b><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt">var</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></b></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">change_color() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(color ==</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></font><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><b><font face="Courier New" size="2"><span style="font-size: 10pt;">setInterval(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;$(&apos;#blink&apos;).css(&apos;color&apos;, change_color);&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">, 500);</span></font></b></div><div align="left"><b><font face="Courier New" size="2"><span style="font-size: 10pt;"><br/></span></font></b></div><div align="left"><b><font face="Courier New" size="2">//</font><font face="Courier New" size="2"><span style="font-size: 10pt;">setInterval() - 每个</span></font><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">预设的毫秒数间隔后，执行指定函数。</span></b></div><div align="left"><font face="Courier New" size="2"><b>//之前这里竟然犯傻使用setTimeout()&nbsp;—— 在预设的毫秒数后，执行指定的语句。</b></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><div><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">第三版：</b></div><div><font face="Courier New" size="2"><b>//</b></font><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">优化功能</b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">：</b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">另外用变量记录颜色值，避免每次使用jQuery选择器去检索标签和属性。</b></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">change_color() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(color ==</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <b><font color="#7F0055" face="Courier New" size="2"><span style="font-size: 10pt;">return</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">color; //</span></font></b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">精简代码：</b><b><font face="Courier New" size="2"><span style="font-size: 10pt;">return语句提取出来。</span></font></b></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">setInterval(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;$(&apos;#blink&apos;).css(&apos;color&apos;, change_color);&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 500);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><b>第四版：</b></font></div><div align="left"><font face="Courier New" size="2"><b>//</b></font><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">精简代码：</b><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">使用布尔变量，以及“ ?: ”表达语句。</b></div><div align="left"><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">isRed =</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>true</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">change_color(){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isRed = !isRed;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>$(</b></span></font><b><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">, isRed ?</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">:</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></b></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">setInterval(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;change_color();&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1000);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><br/></font></div><div align="left"><font face="Courier New" size="2"><br/></font></div><div align="left"><font face="Courier New" size="2"><b>最终第五版：</b></font></div><div align="left"><font face="Courier New" size="2"><b>//</b></font><b style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">精简代码：压缩语句</b></div><div align="left"><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">isRed =</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>true</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">change_color(){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">, <b>(isRed = !isRed)</b> ?</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">:</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">setInterval(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;change_color();&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 750);</span></font></div></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><b>明显的精简，只剩下5行代码！</b></font></div><div align="left"><b><font face="Courier New" size="2">即使是如此简单的地方，</font><font face="Courier New" size="2">细想以下，</font></b></div><div align="left"><b><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">都可以有优化的空间，</span><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;">要勤于思考。</span></b></div><div align="left"><font face="Courier New" size="2"><b><br/></b></font></div><div align="left"><font face="Courier New" size="2"><b>得益于</b></font></div><div align="left"><font face="Courier New" size="2"><b>宽松自由的工作环境、</b></font></div><div align="left"><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: small;"><b>不急迫的工作安排，</b></span></div><div align="left"><font face="Courier New" size="2"><b>才可以不以简单实现功能为目标，</b></font></div><div align="left"><font face="Courier New" size="2"><b>好好地去思考、优化小段代码。</b></font></div><div align="left"><font face="Courier New" size="2"><b><br/></b></font></div><div align="left"><font face="Courier New" size="2"><b>毕竟水平还不高，还有许多进步空间。</b></font></div><div align="left"><font face="Courier New" size="2"><br/></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><b>过程中，曾犯的愚蠢错误：</b></font></div><div align="left"><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>function</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">change_color() {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(color ==</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;white&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;color =</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;red&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp; }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">&nbsp;&nbsp;&nbsp;</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">color;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><div><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">//使用指定函数返回颜色值。这里，我竟以为是绑定的……</span></div><div><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">//即以为：每次调用change_color时，</span><font face="Courier New" size="2"><span style="font-size: 10pt;">$(</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">).css(</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&apos;color&apos;)也会变</span></font></div></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">$(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;#blink&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).css(</span></font> <font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&apos;color&apos;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, change_color);&nbsp;</span></font></div><div align="left"><div><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">//</span><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">setTimeout</span><span style="font-family: &amp;apos;Courier New&amp;apos;; font-size: 13px;">只执行一次而已…… 而不是指定时间间隔后重复执行</span></div></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">setTimeout(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;change_color();&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 500);&nbsp;</span></font></div></div></div></div></div></div></div></div></div>